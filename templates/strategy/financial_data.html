{% extends "strategy/data.html" %}
{% block link %}
{% endblock %}
{% block style %}
    table
    {
    border-collapse: collapse;
    border-spacing: 0;
    margin-right: auto;
    margin-left: auto;
    width: 1000px;
    }
    th, td
    {
    border: 1px solid #b5d6e6;
    font-size: 12px;
    font-weight: normal;
    text-align: center;
    vertical-align: middle;
    height: 20px;
    }
    ths
    {
    background-color: Gray;
    }

    input
    {
    width:200px;
    height:20px;
    border:1px solid Gray;
    }
    span
    {
    font-weight:bold;
    color:#5e5e5e;
    width:40px;
    display:inline-block;
    }
{% endblock %}
{% block header_script %}
{% endblock %}
{% block content %}
    <div class="bs-config-sidebar sidebar" style="font-size:15px;">
        <ul class="nav nav-sidebar">
            <li><a id="financialData" href="{% url 'strategy_financial_data' %}" onclick="">财务数据</a>
                <ul>
                    <li><a id="queryData" href="{% url 'strategy_financial_data' %}" onclick="">查询数据</a>
                    </li>
                    <li><a id="queryData" href="{% url 'strategy_financial_add' %}" onclick="">添加策略</a>
                    </li>
                </ul>
            </li>
            <li id="RobertoChen"><a href="javascript:void(0)" onclick="">RobertoChen</a>
            </li>
        </ul>
    </div>
{% endblock %}
{% block script %}
    <script>
        function getData() {
            $.ajax({
                type: "POST",
                data: {
                    "codes": $("#codes").val(),
                    "dates": $("#dates").val(),
                },
                url: "{% url 'strategy_financial_data' %}",
                timeout: 2000,
                success: function (result) {
                    var saveExcelObj = document.getElementById("saveExcel");
                    var saveCsvObj = document.getElementById("saveCsv");
                    var data = JSON.parse(result);
                    var download_url = "{% url 'file_download' %}";

                    document.getElementById("dataDisplay").innerHTML = data["table_data"];
                    $("[rowspan]").click(function () {
                        newWindow.call(this);
                    });

                    saveExcelObj.setAttribute("style", "");
                    saveExcelObj.setAttribute("href", download_url + "?uuid=" + data["uuid"] + "&type=xls");
                    saveCsvObj.setAttribute("style", "");
                    saveCsvObj.setAttribute("href", download_url + "?uuid=" + data["uuid"] + "&type=csv");
                },
                error: function (xhr) {
                    alert("获取信息失败: " + xhr.statusText + ", details: " + xhr.status);
                }
            });
        }

        function newWindow() {
            debugger;
            alert(this.textContent);
        }
    </script>
{% endblock %}
